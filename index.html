<!-- Mission Brief -->
<section id="mission">
    <h2>⬢ MISSION BRIEF</h2>
    <div class="info-grid">
        <div class="info-card">
            <h3>Objectives</h3>
            <p>Development of STEM skills related to aerospace in a collaborative and educational environment. Members learn design and engineering basics, then expand into specialized projects including rocketry, RC planes, simulators, and drones.</p>
        </div>
        <div class="info-card">
            <h3>Operations Schedule</h3>
            <p><strong>Frequency:</strong> Weekly<br>
            <strong>Day:</strong> Friday<br>
            <strong>Location:</strong> Room 614<br>
            <strong>Status:</strong> Active</p>
        </div>
        <div class="info-card">
            <h3>Command Structure</h3>
            <p><strong>President:</strong> Rodin Hooshiyar<br>
            <strong>Vice President:</strong> Danii Babinsky<br>
            <strong>Advisor:</strong> Stephen Hine</p>
        </div>
    </div>

    <div style="margin-top: 80px; text-align: center;">
        <h3 style="font-family: 'Orbitron', sans-serif; color: var(--nv-green-soft); font-size: 2em; margin-bottom: 30px;">NEXT MISSION BRIEFING</h3>
        <div id="countdown">LOADING...</div>
    </div>
</section>

<!-- Schematics Section -->
<section id="schematics">
    <h2>⬢ AIRCRAFT SCHEMATICS</h2>
    <div class="blueprint-section">
        <h3>F-22 RAPTOR BLUEPRINT</h3>
        <div class="blueprint-container">
            <svg class="blueprint-svg" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M100 10 L190 50 L100 90 L90 70 L90 60 L40 75 L30 70 L90 50 L90 30 L30 30 L40 25 L90 40 L100 10 Z"/>
                <path d="M150 60 L170 65 L165 70 L150 65 Z" stroke="#ff4100" stroke-width="2"/>
                <path d="M150 70 L170 75 L165 80 L150 75 Z" stroke="#ff4100" stroke-width="2"/>
                <circle cx="100" cy="50" r="3" fill="#00cc33"/>
                <circle cx="160" cy="50" r="2" fill="#00cc33"/>
            </svg>
            <div class="blueprint-annotation anno-1">Stealth Hull</div>
            <div class="blueprint-annotation anno-2">Sensor Array</div>
            <div class="blueprint-annotation anno-3">Missile Bay</div>
        </div>
    </div>
</section>

<!-- Radar Section -->
<section id="radar-section">
    <h2 style="color: #fff;">⬢ AIRSPACE RADAR</h2>
    <div class="radar-container">
        <div class="radar-blip blip1"></div>
        <div class="radar-blip blip2"></div>
        <div class="radar-blip blip3"></div>
        <div class="radar-blip blip4"></div>
        <div class="radar-blip blip5"></div>
    </div>
    <p style="margin-top: 30px; font-size: 1.2em;">Live Airspace Monitoring • 5 Active Contacts</p>
</section>

<!-- Active Operations -->
<section id="operations">
    <h2>⬢ ACTIVE OPERATIONS</h2>
    <div class="info-grid">
        <div class="info-card">
            <h3>Rocketry Division</h3>
            <p>Design, build, and launch model rockets. Learn propulsion systems, aerodynamics, flight dynamics, and recovery systems. Participate in competitions and launches.</p>
        </div>
        <div class="info-card">
            <h3>RC Aircraft</h3>
            <p>Remote-controlled aircraft construction and flight operations. Master control systems, aircraft handling, and aerobatic maneuvers.</p>
        </div>
        <div class="info-card">
            <h3>Drone Operations</h3>
            <p>UAV design, programming, and autonomous flight. FPV racing, aerial photography, and navigation systems development.</p>
        </div>
        <div class="info-card">
            <h3>Flight Simulation</h3>
            <p>Advanced flight simulator operations for both fixed-wing and rotary aircraft. Learn instrument flight, navigation, and emergency procedures.</p>
        </div>
        <div class="info-card">
            <h3>Design & Engineering</h3>
            <p>CAD modeling, 3D printing, and aerospace engineering fundamentals. Create custom designs for all vehicle types.</p>
        </div>
        <div class="info-card">
            <h3>Specialized Projects</h3>
            <p>Pursue focused projects in any aerospace discipline with mentorship and resources.</p>
        </div>
    </div>
</section>

<!-- Team Section -->
<section id="team">
    <h2>⬢ SQUADRON ROSTER</h2>
    <div class="team-grid" id="team-grid">
        <p style="text-align: center; color: #888; grid-column: 1 / -1;">No team members yet. Create your badge to join!</p>
    </div>
</section>

<!-- Join Section -->
<section id="join">
    <h2>⬢ JOIN THE SQUADRON</h2>
    <div class="info-grid">
        <div class="info-card">
            <h3>Requirements</h3>
            <ul>
                <li>Los Altos High School student</li>
                <li>Interest in aerospace, aviation, or engineering</li>
                <li>No prior experience required</li>
                <li>Commitment to Friday operations</li>
            </ul>
        </div>
        <div class="info-card">
            <h3>Benefits</h3>
            <ul>
                <li>Hands-on STEM experience</li>
                <li>Collaborative project work</li>
                <li>Access to flight simulators</li>
                <li>Rocket and drone operations</li>
                <li>Leadership opportunities</li>
            </ul>
        </div>
    </div>

    <div style="margin-top: 80px;">
        <h3 style="font-family: 'Orbitron', sans-serif; text-align: center; color: var(--nv-green-soft); margin-bottom: 40px; font-size: 2.5em;">TACTICAL COMMUNICATIONS</h3>
        
        <div class="placeholder-box">
            <h3>MISSION STATEMENT</h3>
            <p>Insert your official mission statement here</p>
        </div>

        <div class="placeholder-box">
            <h3>CONTACT PROTOCOLS</h3>
            <p>Insert contact email, Discord, or Instagram links here</p>
        </div>

        <div class="placeholder-box">
            <h3>RECRUITMENT FORM</h3>
            <p>Embed your Google Form here:</p>
            <p style="font-size: 0.95em; margin-top: 15px;">&lt;iframe src="YOUR_GOOGLE_FORM_LINK" width="100%" height="600"&gt;&lt;/iframe&gt;</p>
        </div>

        <div class="placeholder-box">
            <h3>OPERATIONS CALENDAR</h3>
            <p>Embed your Google Calendar here:</p>
            <p style="font-size: 0.95em; margin-top: 15px;">&lt;iframe src="YOUR_GOOGLE_CALENDAR_LINK" width="100%" height="600"&gt;&lt;/iframe&gt;</p>
        </div>
    </div>
</section>

<footer>
    <p style="font-family: 'Orbitron', sans-serif; color: var(--nv-green-soft); font-size: 1.3em; margin-bottom: 15px;">⬢ LOS ALTOS HIGH SCHOOL AVIATION CLUB ⬢</p>
    <p>AEROSPACE OPERATIONS DIVISION • ROOM 614 • FRIDAY OPERATIONS</p>
    <p style="margin-top: 25px; font-size: 0.9em;">Deployed on GitHub Pages • All Systems Operational</p>
</footer>

<script>
    // Badge Creator Logic
    const badgeCreator = document.getElementById('badge-creator');
    const nameInput = document.getElementById('pilot-name');
    const rankSelect = document.getElementById('pilot-rank');
    const flagSelect = document.getElementById('pilot-flag');
    const photoInput = document.getElementById('pilot-photo');
    const namePreview = document.getElementById('name-preview');
    const rankPreview = document.getElementById('rank-preview');
    const flagPreview = document.getElementById('preview-flag');
    const photoPreview = document.getElementById('photo-preview');
    const idPreview = document.getElementById('id-preview');
    const grantButton = document.getElementById('grant-access');
    const teamGrid = document.getElementById('team-grid');

    // Load saved members
    let members = JSON.parse(localStorage.getItem('aviationMembers')) || [];

    // Update preview in real-time
    nameInput.addEventListener('input', () => {
        namePreview.textContent = nameInput.value || 'PILOT NAME';
    });

    rankSelect.addEventListener('change', () => {
        rankPreview.textContent = rankSelect.value;
    });

    flagSelect.addEventListener('change', () => {
        flagPreview.textContent = flagSelect.value;
    });

    photoInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                photoPreview.src = event.target.result;
            };
            reader.readAsDataURL(file);
        }
    });

    // Generate random ID
    idPreview.textContent = Math.floor(Math.random() * 99999).toString().padStart(5, '0');

    // Grant access and save badge
    grantButton.addEventListener('click', () => {
        const name = nameInput.value.trim();
        if (!name) {
            alert('Please enter your pilot name');
            return;
        }

        // Save member
        const member = {
            name: name,
            rank: rankSelect.value,
            flag: flagSelect.value,
            photo: photoPreview.src || '',
            id: idPreview.textContent
        };

        members.push(member);
        localStorage.setItem('aviationMembers', JSON.stringify(members));

        // Hide badge creator
        badgeCreator.classList.add('hidden');

        // Render team
        renderTeam();
    });

    // Render team members
    function renderTeam() {
        if (members.length === 0) {
            teamGrid.innerHTML = '<p style="text-align: center; color: #888; grid-column: 1 / -1;">No team members yet. Create your badge to join!</p>';
            return;
        }

        teamGrid.innerHTML = '';
        members.forEach(member => {
            const badge = document.createElement('div');
            badge.className = 'team-badge';
            badge.innerHTML = `
                <div class="badge-flag">${member.flag}</div>
                ${member.photo ? `<img src="${member.photo}" class="badge-photo" alt="${member.name}">` : '<div class="badge-photo"></div>'}
                <div class="badge-name" style="font-size: 18px; margin-top: 10px;">${member.name}</div>
                <div class="badge-rank" style="font-size: 14px;">${member.rank}</div>
                <div style="font-size: 11px; color: #666; margin-top: 5px;">ID: ${member.id}</div>
            `;
            teamGrid.appendChild(badge);
        });
    }

    // Altitude tracker
    window.addEventListener('scroll', () => {
        const scrollPercent = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
        const indicator = document.getElementById('altitude-indicator');
        indicator.style.top = scrollPercent + '%';
    });

    // Countdown to next Friday
    function updateCountdown() {
        const now = new Date();
        const currentDay = now.getDay();
        const daysUntilFriday = (5 - currentDay + 7) % 7 || 7;
        
        const nextFriday = new Date(now);
        nextFriday.setDate(now.getDate() + daysUntilFriday);
        nextFriday.setHours(14, 30, 0, 0);
        
        const diff = nextFriday - now;
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('countdown').textContent = 
            `${days}D ${hours}H ${minutes}M ${seconds}S`;
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    // Section visibility on scroll
    const sections = document.querySelectorAll('section');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, { threshold: 0.1 });

    sections.forEach(section => observer.observe(section));

    // Smooth scrolling for nav links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });

    // Initialize
    renderTeam();

    // Check if badge was already created
    window.onload = function() {
        if (members.length > 0) {
            badgeCreator.classList.add('hidden');
        }
    };
</script>
